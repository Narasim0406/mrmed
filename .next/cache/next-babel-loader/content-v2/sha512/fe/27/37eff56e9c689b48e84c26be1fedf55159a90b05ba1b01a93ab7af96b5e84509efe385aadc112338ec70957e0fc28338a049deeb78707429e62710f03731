{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport OrderSummary from '../orderSummary/index';\nimport styles from './MedicineDetail.module.scss';\n\nfunction MedicineDetail() {\n  const {\n    0: cartProducts,\n    1: setCartProducts\n  } = useState([]);\n  const {\n    0: total,\n    1: setTotal\n  } = useState(0);\n  const {\n    0: savedAmount,\n    1: setSavedAmount\n  } = useState(0);\n\n  const calculation = () => {\n    document.getElementById('cart-count').innerText = cartProducts ? cartProducts.length : 0;\n    const total = cartProducts.reduce((prevValue, currentValue) => prevValue + currentValue.price, 0);\n    const discount = cartProducts.reduce((prevValue, currentValue) => prevValue + currentValue.discountPrice, 0);\n    setTotal(total);\n    setSavedAmount(discount);\n  };\n\n  useEffect(() => {\n    let cartProducts = JSON.parse(localStorage.getItem('cartList'));\n    setCartProducts(cartProducts);\n    setTimeout(() => {\n      calculation();\n    }, 0);\n  }, []);\n\n  const increaseQuantity = id => {\n    let cp = cartProducts.map(cartProduct => {\n      if (cartProduct._id === id && cartProduct.qty < 3) {\n        cartProduct.qty += 1;\n      }\n\n      return cartProduct;\n    });\n    setCartProducts(cp);\n    setTimeout(() => {\n      calculation();\n    }, 0);\n  };\n\n  const decreaseQuantity = id => {\n    let cp = cartProducts.map(cartProduct => {\n      if (cartProduct._id === id && cartProduct.qty > 0) {\n        cartProduct.qty -= 1;\n      }\n\n      return cartProduct;\n    });\n    setCartProducts(cp);\n    setTimeout(() => {\n      calculation();\n    }, 0);\n  };\n\n  const removeFromCart = id => {\n    let rmCart = cartProducts.filter(prod => prod._id !== id);\n    localStorage.setItem('cartList', JSON.stringify(rmCart));\n    setCartProducts(rmCart);\n    setTimeout(() => {\n      calculation();\n    }, 0);\n  };\n\n  return __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-8\"\n  }, cartProducts && cartProducts.length !== 0 ? cartProducts.map((product, ind) => {\n    let {\n      _id,\n      medicineName,\n      manufacturer,\n      price,\n      PAP,\n      discountPrice\n    } = product;\n    product.qty = product.qty > 0 ? product.qty : 0;\n    console.log();\n    return __jsx(\"div\", {\n      key: ind\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-3\"\n    }, __jsx(\"div\", {\n      className: styles.background\n    }, __jsx(\"img\", {\n      className: styles.img,\n      src: require('../../../assets/images/product-3.png')\n    }))), __jsx(\"div\", {\n      className: \"col-md-5\"\n    }, __jsx(\"div\", {\n      className: styles.category\n    }, __jsx(\"span\", null, \"Diabetes\")), __jsx(\"div\", {\n      className: styles.name\n    }, __jsx(\"b\", null, medicineName), PAP && // <Link to=\"/dashboard/papAssistance\">\n    __jsx(\"img\", {\n      className: styles.cartpiImg,\n      src: require('../../../assets/images/prescription.png')\n    }) // </Link> \n    ), __jsx(\"div\", null, __jsx(\"span\", {\n      className: styles.manufacturer\n    }, \"Manufacturer: \", manufacturer)), __jsx(\"div\", {\n      className: styles.quantity\n    }, __jsx(\"table\", null, __jsx(\"tbody\", null, __jsx(\"tr\", {\n      className: styles.quantityBtns\n    }, __jsx(\"td\", {\n      className: styles.tdCol,\n      onClick: increaseQuantity(_id)\n    }, __jsx(\"img\", {\n      src: require('../../../assets/images/+.png')\n    })), __jsx(\"td\", {\n      className: styles.tdCol\n    }, product.qty), __jsx(\"td\", {\n      className: styles.tdCol,\n      onClick: decreaseQuantity(_id)\n    }, __jsx(\"img\", {\n      src: require('../../../assets/images/-.png')\n    }))))))), __jsx(\"div\", {\n      className: `col-md-4 ${styles.priceRequest}`\n    }, __jsx(\"button\", {\n      className: styles.btnMatch\n    }, \"PRICE MATCH\"), __jsx(\"img\", {\n      onClick: removeFromCart(_id),\n      src: require('../../../assets/images/remove-cart.png'),\n      alt: \"remove-cart\"\n    }), __jsx(\"div\", {\n      className: styles.price\n    }, __jsx(\"b\", {\n      className: styles.discount\n    }, \"\\u20B9\", (price - discountPrice).toFixed(2)), __jsx(\"span\", {\n      className: styles.original\n    }, \"MRP \\u20B9\", price)))), __jsx(\"hr\", null));\n  }) : __jsx(\"div\", null, __jsx(\"p\", null, \"Your Cart is Empty\"), __jsx(\"p\", null, \"Please Add products to the cart\"))), __jsx(\"div\", {\n    className: \"col-md-4\"\n  }, __jsx(OrderSummary, {\n    total: total,\n    savedAmount: savedAmount\n  })));\n}\n\nexport default MedicineDetail;","map":null,"metadata":{},"sourceType":"module"}