{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Surya\\\\Documents\\\\mr_med_frontend\\\\components\\\\Login\\\\Signin\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { userDetails, userToken } from '../../../actions';\nimport styles from './SingnInComponent.module.scss';\nimport { Modal } from 'reactstrap';\nimport CarouselForAll from '../CarouselForLogIn/index';\nimport jwt_decode from \"jwt-decode\";\nimport { auth_url } from '../../../apiVariables';\nimport axios from 'axios';\nexport default function SingnInComponent(props) {\n  const dispatch = useDispatch();\n  let {\n    0: token,\n    1: setToken\n  } = useState(\"\");\n  let {\n    0: isSignUp,\n    1: handleIsSignup\n  } = useState(false);\n  const {\n    0: decoded,\n    1: setDecoded\n  } = useState({});\n  const {\n    0: which,\n    1: setWhich\n  } = useState(0);\n  const {\n    0: emailIdMobileNo,\n    1: setemailIdMobileNo\n  } = useState(\"\");\n  const {\n    0: otp,\n    1: setOtp\n  } = useState({\n    code1: \"\",\n    code2: \"\",\n    code3: \"\",\n    code4: \"\",\n    code5: \"\",\n    code6: \"\"\n  });\n  const {\n    0: signUpData,\n    1: setSignUpData\n  } = useState({\n    name: \"\",\n    emailId: \"\",\n    mobileNo: \"\",\n    userTypeId: 3,\n    mobileVerifyStatus: 1\n  });\n  useEffect(() => {\n    setWhich(0);\n  }, []);\n\n  const handelSignIn = () => {\n    handleIsSignup(true);\n    setWhich(0);\n  };\n\n  const handelSignUp = () => {\n    handleIsSignup(true);\n    setWhich(1);\n  };\n\n  const handelOtp = () => {\n    setWhich(2);\n  };\n\n  const onChangeForm = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setSignUpData(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      [name]: value\n    }));\n  };\n\n  const onChangeOtp = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setOtp(prevState => _objectSpread(_objectSpread({}, prevState), {}, {\n      [name]: value\n    }));\n\n    if (value === \"\") {\n      handleBackspace(e);\n    } else {\n      handleEnter(e);\n    }\n  };\n\n  const handleSignInData = async e => {\n    e.preventDefault();\n    handleIsSignup(false);\n    const url = `${auth_url}/user/signInByEmailPhone`;\n    let isNewUser = emailIdMobileNo === signUpData.mobileNo ? true : false;\n    let data = isNewUser ? {\n      emailIdMobileNo,\n      isNewUser\n    } : {\n      emailIdMobileNo\n    };\n    let res = await axios.post(url, data);\n\n    if (res.status === 200) {\n      console.log(res.data);\n      if (isNewUser === true) signUp();\n      handelOtp();\n    } else if (res.status === 404) {// alert(res.statusText)\n    }\n  };\n\n  const verifyOtp = async e => {\n    e.preventDefault();\n\n    if (isSignUp === false) {\n      signInVerify();\n    } else {\n      signUpVerify();\n    }\n  };\n\n  const signUpVerify = async () => {\n    const url = `${auth_url}/user/verifySignInByEmailPhone`;\n    let code = otp.code1 + otp.code2 + otp.code3 + otp.code4 + otp.code5 + otp.code6;\n    let isNewUser = true;\n    let data = {\n      emailIdMobileNo,\n      isNewUser,\n      code\n    };\n    let res = await axios.post(url, data);\n\n    if (res.status === 200 || res.status === \"success\") {\n      setOtp({\n        code1: \"\",\n        code2: \"\",\n        code3: \"\",\n        code4: \"\",\n        code5: \"\",\n        code6: \"\"\n      });\n      localStorage.setItem('token', res.data.data.token);\n      localStorage.setItem('userData', JSON.stringify(res.data.data.userData));\n      console.log(res, \"verifyOtp\", localStorage);\n      signUp();\n    } else {// alert(\"otp verification failed\")\n    }\n  };\n\n  const signInVerify = async () => {\n    const url = `${auth_url}/user/verifySignInByEmailPhone`;\n    let code = otp.code1 + otp.code2 + otp.code3 + otp.code4 + otp.code5 + otp.code6;\n    let isNewUser = false;\n    let data = {\n      emailIdMobileNo,\n      isNewUser,\n      code\n    };\n    let res = await axios.post(url, data);\n\n    if (res.status === 200 || res.status == \"success\") {\n      setOtp({\n        code1: \"\",\n        code2: \"\",\n        code3: \"\",\n        code4: \"\",\n        code5: \"\",\n        code6: \"\"\n      });\n      localStorage.setItem('token', res.data.data.token);\n      localStorage.setItem('userData', JSON.stringify(res.data.data.userData));\n      console.log(res, \"verifyOtp\", localStorage); // if(isNewUser===false){\n      //     dispatch(userDetails(res.data.data.token));\n      //     dispatch(userToken(res.data.data.userData));\n      // }\n\n      props.toggle();\n    } else {// alert(\"otp verification failed\")\n    }\n  };\n\n  const signUp = async () => {\n    const url = `${auth_url}/user/signup`;\n    console.log(signUpData, \"signUpData\");\n    let res = await axios.post(url, signUpData);\n\n    if (res.status === 200 || res.status === \"success\") {\n      console.log(res.data, \"signUp\");\n      dispatch(userDetails(res.data.data.token));\n      dispatch(userToken(res.data.data.userData));\n      props.toggle();\n      setSignUpData({\n        name: '',\n        emailId: '',\n        mobileNo: '',\n        userTypeId: 3,\n        mobileVerifyStatus: 1\n      });\n    } else if (res.status === 400) {// alert(\"User Already has Registered\");\n    }\n  };\n\n  const handleSignUpData = async e => {\n    e.preventDefault();\n    handleIsSignup(true);\n    setemailIdMobileNo(signUpData.mobileNo);\n    sendSignUpOtp();\n  };\n\n  const sendSignUpOtp = async () => {\n    handleIsSignup(false);\n    const url = `${auth_url}/user/signInByEmailPhone`;\n    let isNewUser = true;\n    let data = {\n      \"emailIdMobileNo\": signUpData.mobileNo,\n      \"isNewUser\": true\n    };\n    let res = await axios.post(url, data);\n\n    if (res.status === 200 || res.status === \"success\") {\n      handelOtp();\n    }\n  };\n\n  function handleEnter(event) {\n    console.log(event.keyCode, \"sdfgsdhsdf\");\n    const form = event.target.form;\n    const index = Array.prototype.indexOf.call(form, event.target);\n    console.log(form, index, \"sdfgsdhsdf\");\n\n    if (index !== 5) {\n      form.elements[index + 1].focus();\n      event.preventDefault();\n    }\n  }\n\n  function handleBackspace(event) {\n    console.log(event.keyCode, \"sdfgsdhsdf\");\n    const form = event.target.form;\n    const index = Array.prototype.indexOf.call(form, event.target);\n    console.log(form, index, \"sdfgsdhsdf\");\n\n    if (index !== 0) {\n      form.elements[index - 1].focus();\n      event.preventDefault();\n    }\n  }\n\n  return __jsx(Modal, {\n    isOpen: props.modal,\n    toggle: props.toggle,\n    className: styles.signInUpModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, which === 0 ? __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: styles.signIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: styles.signInCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 33\n    }\n  }, __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: handleSignInData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 37\n    }\n  }, __jsx(\"div\", {\n    className: styles.signinInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 41\n    }\n  }, __jsx(\"p\", {\n    className: styles.signinHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 45\n    }\n  }, \"Welcome to MrMed\"), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.singninFormInput,\n    name: \"mobileNo\",\n    placeholder: \"Mobile number\",\n    value: emailIdMobileNo,\n    onChange: e => setemailIdMobileNo(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 45\n    }\n  })), __jsx(\"div\", {\n    className: styles.signinBtns,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 41\n    }\n  }, __jsx(\"button\", {\n    className: styles.verifyBtn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 45\n    }\n  }, \"VERIFY NUMBER\"), __jsx(\"p\", {\n    className: styles.noAccount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 45\n    }\n  }, \"Don't have account ? \", __jsx(\"span\", {\n    className: styles.register,\n    onClick: handelSignUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 98\n    }\n  }, \"Register\"))))))), __jsx(\"div\", {\n    className: \"col-md-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 25\n    }\n  }, __jsx(CarouselForAll, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 29\n    }\n  }))) : \"\", which === 1 ? __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 31\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: styles.signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: styles.signupContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    className: styles.signupHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 37\n    }\n  }, \"Welcome to MrMed\"), __jsx(\"p\", {\n    className: styles.register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 37\n    }\n  }, \"Register\"), __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: handleSignUpData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 37\n    }\n  }, __jsx(\"div\", {\n    className: styles.signupMain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 41\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    className: styles.signupFormInput,\n    name: \"name\",\n    placeholder: \"Name\",\n    value: signUpData.name,\n    onChange: e => onChangeForm(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 45\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.signupFormInput,\n    name: \"emailId\",\n    placeholder: \"Email Address\",\n    value: signUpData.emailId,\n    onChange: e => onChangeForm(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 45\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.signupFormInput,\n    name: \"mobileNo\",\n    placeholder: \"MobileNumber\",\n    value: signUpData.mobileNo,\n    onChange: e => onChangeForm(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 45\n    }\n  })), __jsx(\"button\", {\n    className: styles.sverifyBtn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 41\n    }\n  }, \"SIGN UP\"))), __jsx(\"div\", {\n    className: styles.accountsMain,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: styles.nosignAccooun,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 37\n    }\n  }, __jsx(\"p\", {\n    className: styles.nosignupAccount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 41\n    }\n  }, \"Already have an account ? \", __jsx(\"span\", {\n    onClick: handelSignIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 105\n    }\n  }, \"Login\"))), __jsx(\"div\", {\n    className: styles.signupFooter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 37\n    }\n  }, __jsx(\"p\", {\n    className: styles.termsCont,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 41\n    }\n  }, \"By continuing  you agree to the to our \", __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 112\n    }\n  }, \"Terms of use and Privacy policy\"))))))), __jsx(\"div\", {\n    className: \"col-md-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 21\n    }\n  }, __jsx(CarouselForAll, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 25\n    }\n  }))) : \"\", which === 2 ? __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 31\n    }\n  }, __jsx(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: styles.otpLogin_inner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    className: styles.textContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 29\n    }\n  }, __jsx(\"p\", {\n    className: styles.otp_header,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 33\n    }\n  }, \"Verify OTP\"), __jsx(\"p\", {\n    className: styles.otp_number,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 33\n    }\n  }, \"Please enter the OTP code sent to your \", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 105\n    }\n  }), \" mobile number +91 \", emailIdMobileNo)), __jsx(\"form\", {\n    method: \"post\",\n    onSubmit: verifyOtp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    className: styles.otpno_container,\n    id: \"otp-screen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 33\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    className: styles.otp_form_input,\n    name: \"code1\",\n    value: otp.code1,\n    onChange: e => onChangeOtp(e),\n    maxLength: \"1\",\n    required: true,\n    placeholder: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 37\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.otp_form_input,\n    name: \"code2\",\n    placeholder: \"0\",\n    maxLength: \"1\",\n    value: otp.code2,\n    onChange: e => onChangeOtp(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 37\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.otp_form_input,\n    name: \"code3\",\n    placeholder: \"0\",\n    maxLength: \"1\",\n    value: otp.code3,\n    onChange: e => onChangeOtp(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 37\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.otp_form_input,\n    name: \"code4\",\n    placeholder: \"0\",\n    maxLength: \"1\",\n    value: otp.code4,\n    onChange: e => onChangeOtp(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 37\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.otp_form_input,\n    name: \"code5\",\n    placeholder: \"0\",\n    maxLength: \"1\",\n    value: otp.code5,\n    onChange: e => onChangeOtp(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 37\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    className: styles.otp_form_input,\n    name: \"code6\",\n    placeholder: \"0\",\n    maxLength: \"1\",\n    value: otp.code6,\n    onChange: e => onChangeOtp(e),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 37\n    }\n  })), __jsx(\"div\", {\n    className: styles.btnContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 33\n    }\n  }, __jsx(\"button\", {\n    className: styles.otp_verify,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 37\n    }\n  }, \"VERIFY\"))))), __jsx(\"div\", {\n    className: \"col-md-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 21\n    }\n  }, __jsx(CarouselForAll, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 25\n    }\n  }))) : \"\");\n}","map":{"version":3,"sources":["C:/Users/Surya/Documents/mr_med_frontend/components/Login/Signin/index.js"],"names":["React","useState","useEffect","useDispatch","userDetails","userToken","styles","Modal","CarouselForAll","jwt_decode","auth_url","axios","SingnInComponent","props","dispatch","token","setToken","isSignUp","handleIsSignup","decoded","setDecoded","which","setWhich","emailIdMobileNo","setemailIdMobileNo","otp","setOtp","code1","code2","code3","code4","code5","code6","signUpData","setSignUpData","name","emailId","mobileNo","userTypeId","mobileVerifyStatus","handelSignIn","handelSignUp","handelOtp","onChangeForm","e","value","target","prevState","onChangeOtp","handleBackspace","handleEnter","handleSignInData","preventDefault","url","isNewUser","data","res","post","status","console","log","signUp","verifyOtp","signInVerify","signUpVerify","code","localStorage","setItem","JSON","stringify","userData","toggle","handleSignUpData","sendSignUpOtp","event","keyCode","form","index","Array","prototype","indexOf","call","elements","focus","modal","signInUpModal","signIn","signInCard","signinInput","signinHeader","singninFormInput","signinBtns","verifyBtn","noAccount","register","signupContent","signupHeader","signupMain","signupFormInput","sverifyBtn","accountsMain","nosignAccooun","nosignupAccount","signupFooter","termsCont","otpLogin_inner","textContent","otp_header","otp_number","otpno_container","otp_form_input","btnContainer","otp_verify"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux'\r\nimport { userDetails, userToken } from '../../../actions'\r\nimport styles from './SingnInComponent.module.scss';\r\nimport { Modal } from 'reactstrap';\r\nimport CarouselForAll from '../CarouselForLogIn/index';\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { auth_url } from '../../../apiVariables';\r\nimport axios from 'axios';\r\n\r\nexport default function SingnInComponent(props) {\r\n\r\n    const dispatch = useDispatch();\r\n    let [token, setToken] = useState(\"\");\r\n    let [isSignUp, handleIsSignup] = useState(false);\r\n    const [decoded, setDecoded] = useState({});\r\n    const [which, setWhich] = useState(0);\r\n    const [emailIdMobileNo, setemailIdMobileNo] = useState(\"\");\r\n    const [otp, setOtp] = useState({\r\n        code1: \"\",\r\n        code2: \"\",\r\n        code3: \"\",\r\n        code4: \"\",\r\n        code5: \"\",\r\n        code6: \"\"\r\n    })\r\n    const [signUpData, setSignUpData] = useState({\r\n        name: \"\",\r\n        emailId: \"\",\r\n        mobileNo: \"\",\r\n        userTypeId: 3,\r\n        mobileVerifyStatus: 1\r\n    });\r\n    useEffect(() => {\r\n        setWhich(0);\r\n    }, []);\r\n    const handelSignIn = () => {\r\n        handleIsSignup(true)\r\n        setWhich(0)\r\n    }\r\n    const handelSignUp = () => {\r\n        handleIsSignup(true)\r\n        setWhich(1)\r\n    }\r\n    const handelOtp = () => {\r\n        setWhich(2)\r\n    }\r\n    const onChangeForm = (e) => {\r\n        const { name, value } = e.target\r\n        setSignUpData(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }))\r\n    }\r\n    const onChangeOtp = (e) => {\r\n        const { name, value } = e.target\r\n        setOtp(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }))\r\n        if(value===\"\"){\r\n            handleBackspace(e)\r\n        } else {\r\n            handleEnter(e)\r\n        }\r\n    }\r\n    const handleSignInData = async (e) => {\r\n        e.preventDefault();\r\n        handleIsSignup(false);\r\n        const url = `${auth_url}/user/signInByEmailPhone`;\r\n        let isNewUser = emailIdMobileNo === signUpData.mobileNo ? true : false;\r\n        let data = isNewUser ? { emailIdMobileNo, isNewUser } : { emailIdMobileNo };\r\n        let res = await axios.post(url, data);\r\n        if (res.status === 200) {\r\n            console.log(res.data);\r\n            if (isNewUser === true) signUp();\r\n            handelOtp();\r\n        } else if (res.status === 404) {\r\n            // alert(res.statusText)\r\n        }\r\n    }\r\n    const verifyOtp = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (isSignUp === false) {\r\n            signInVerify();\r\n        } else {\r\n            signUpVerify()\r\n        }\r\n    }\r\n\r\n    const signUpVerify = async () => {\r\n        const url = `${auth_url}/user/verifySignInByEmailPhone`;\r\n        let code = otp.code1 + otp.code2 + otp.code3 + otp.code4 + otp.code5 + otp.code6;\r\n        let isNewUser = true;\r\n        let data = { emailIdMobileNo, isNewUser, code };\r\n        let res = await axios.post(url, data);\r\n        if (res.status === 200 || res.status === \"success\") {\r\n            setOtp({\r\n                code1: \"\",\r\n                code2: \"\",\r\n                code3: \"\",\r\n                code4: \"\",\r\n                code5: \"\",\r\n                code6: \"\"\r\n            });\r\n            localStorage.setItem('token', res.data.data.token);\r\n            localStorage.setItem('userData',JSON.stringify(res.data.data.userData));\r\n            console.log(res, \"verifyOtp\", localStorage)\r\n\r\n            signUp();\r\n        } else {\r\n            // alert(\"otp verification failed\")\r\n        }\r\n    }\r\n\r\n    const signInVerify = async () => {\r\n        const url = `${auth_url}/user/verifySignInByEmailPhone`;\r\n        let code = otp.code1 + otp.code2 + otp.code3 + otp.code4 + otp.code5 + otp.code6;\r\n        let isNewUser = false;\r\n        let data = { emailIdMobileNo, isNewUser, code };\r\n        let res = await axios.post(url, data);\r\n        if (res.status === 200 || res.status == \"success\") {\r\n            setOtp({\r\n                code1: \"\",\r\n                code2: \"\",\r\n                code3: \"\",\r\n                code4: \"\",\r\n                code5: \"\",\r\n                code6: \"\"\r\n            });\r\n\r\n            localStorage.setItem('token', res.data.data.token);\r\n            localStorage.setItem('userData', JSON.stringify(res.data.data.userData));\r\n            console.log(res, \"verifyOtp\", localStorage)\r\n            // if(isNewUser===false){\r\n            //     dispatch(userDetails(res.data.data.token));\r\n            //     dispatch(userToken(res.data.data.userData));\r\n            // }\r\n            props.toggle()\r\n\r\n        } else {\r\n            // alert(\"otp verification failed\")\r\n        }\r\n    }\r\n\r\n    const signUp = async () => {\r\n        const url = `${auth_url}/user/signup`;\r\n        console.log(signUpData, \"signUpData\");\r\n        let res = await axios.post(url, signUpData);\r\n        if (res.status === 200 || res.status===\"success\") {\r\n            console.log(res.data, \"signUp\");\r\n            dispatch(userDetails(res.data.data.token));\r\n            dispatch(userToken(res.data.data.userData));\r\n            props.toggle();\r\n            setSignUpData({\r\n                name: '',\r\n                emailId: '',\r\n                mobileNo: '',\r\n                userTypeId: 3,\r\n                mobileVerifyStatus: 1\r\n            });\r\n        }\r\n        else if (res.status === 400) {\r\n            // alert(\"User Already has Registered\");\r\n        }\r\n\r\n\r\n    }\r\n    const handleSignUpData = async (e) => {\r\n        e.preventDefault();\r\n        handleIsSignup(true);\r\n\r\n        setemailIdMobileNo(signUpData.mobileNo);\r\n        sendSignUpOtp();\r\n    }\r\n\r\n    const sendSignUpOtp = async () => {\r\n        handleIsSignup(false);\r\n        const url = `${auth_url}/user/signInByEmailPhone`;\r\n        let isNewUser = true;\r\n        let data = {\r\n            \"emailIdMobileNo\": signUpData.mobileNo,\r\n            \"isNewUser\": true\r\n        };\r\n        let res = await axios.post(url, data);\r\n        if (res.status === 200 || res.status === \"success\") {\r\n            handelOtp();\r\n        }\r\n    }\r\n\r\n    \r\n    function handleEnter(event) {\r\n        console.log(event.keyCode, \"sdfgsdhsdf\")\r\n        \r\n        const form = event.target.form;\r\n        const index = Array.prototype.indexOf.call(form, event.target);\r\n        console.log(form, index, \"sdfgsdhsdf\")\r\n        if(index!==5){\r\n          form.elements[index + 1].focus();\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n      function handleBackspace(event) {\r\n        console.log(event.keyCode, \"sdfgsdhsdf\")\r\n        \r\n        const form = event.target.form;\r\n        const index = Array.prototype.indexOf.call(form, event.target);\r\n        console.log(form, index, \"sdfgsdhsdf\")\r\n        if(index!==0){\r\n          form.elements[index - 1].focus();\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n    return (\r\n        <Modal isOpen={props.modal} toggle={props.toggle} className={styles.signInUpModal}>\r\n            {\r\n                which === 0 ?\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-5\">\r\n                            <div className={styles.signIn}>\r\n                                <div className={styles.signInCard}>\r\n                                    <form method=\"post\" onSubmit={handleSignInData}>\r\n                                        <div className={styles.signinInput}>\r\n                                            <p className={styles.signinHeader}>Welcome to MrMed</p>\r\n                                            <input type=\"text\"\r\n                                                className={styles.singninFormInput}\r\n                                                name=\"mobileNo\"\r\n                                                placeholder=\"Mobile number\"\r\n                                                value={emailIdMobileNo}\r\n                                                onChange={(e) => setemailIdMobileNo(e.target.value)}\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <div className={styles.signinBtns}>\r\n                                            {/* <Link to=\"/auth/otpLogin/\"> */}\r\n                                            <button className={styles.verifyBtn}>VERIFY NUMBER</button>\r\n                                            {/* </Link>                                 */}\r\n                                            <p className={styles.noAccount}>Don't have account ? <span className={styles.register} onClick={handelSignUp}>Register</span></p>\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md-7\">\r\n                            <CarouselForAll />\r\n                        </div>\r\n                    </div> : \"\"}\r\n            {\r\n                which === 1 ? <div className=\"row\">\r\n                    <div className=\"col-md-5\">\r\n                        <div className={styles.signUp}>\r\n                            <div className={styles.signupContent}>\r\n                                <div>\r\n                                    <p className={styles.signupHeader}>Welcome to MrMed</p>\r\n                                    <p className={styles.register}>Register</p>\r\n                                    <form method=\"post\" onSubmit={handleSignUpData}>\r\n                                        <div className={styles.signupMain}>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className={styles.signupFormInput}\r\n                                                name=\"name\"\r\n                                                placeholder=\"Name\"\r\n                                                value={signUpData.name}\r\n                                                onChange={(e) => onChangeForm(e)}\r\n                                                required\r\n                                            />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className={styles.signupFormInput}\r\n                                                name=\"emailId\"\r\n                                                placeholder=\"Email Address\"\r\n                                                value={signUpData.emailId}\r\n                                                onChange={(e) => onChangeForm(e)}\r\n                                                required\r\n                                            />\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                className={styles.signupFormInput}\r\n                                                name=\"mobileNo\"\r\n                                                placeholder=\"MobileNumber\"\r\n                                                value={signUpData.mobileNo}\r\n                                                onChange={(e) => onChangeForm(e)}\r\n                                                required\r\n                                            />\r\n                                        </div>\r\n                                        <button className={styles.sverifyBtn}>SIGN UP</button>\r\n                                    </form>\r\n                                </div>\r\n                                <div className={styles.accountsMain}>\r\n                                    <div className={styles.nosignAccooun}>\r\n                                        <p className={styles.nosignupAccount}>Already have an account ? <span onClick={handelSignIn}>Login</span></p>\r\n                                    </div>\r\n                                    <div className={styles.signupFooter}>\r\n                                        <p className={styles.termsCont}>By continuing  you agree to the to our <span>Terms of use and Privacy policy</span></p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-7\">\r\n                        <CarouselForAll />\r\n                    </div>\r\n                </div> : \"\"\r\n            }\r\n            {\r\n                which === 2 ? <div className=\"row\">\r\n                    <div className=\"col-md-5\">\r\n                        <div className={styles.otpLogin_inner}>\r\n                            <div className={styles.textContent}>\r\n                                <p className={styles.otp_header}>Verify OTP</p>\r\n                                <p className={styles.otp_number}>Please enter the OTP code sent to your <br /> mobile number +91 {emailIdMobileNo}</p>\r\n                            </div>\r\n                            <form method=\"post\" onSubmit={verifyOtp}>\r\n                                <div className={styles.otpno_container} id=\"otp-screen\">\r\n                                    <input type=\"text\"\r\n                                        className={styles.otp_form_input}\r\n                                        name=\"code1\"\r\n                                        value={otp.code1}\r\n                                        onChange={(e) => onChangeOtp(e)}\r\n                                        maxLength=\"1\"\r\n                                        required\r\n                                        placeholder=\"0\" />\r\n                                    <input type=\"text\"\r\n                                        className={styles.otp_form_input}\r\n                                        name=\"code2\"\r\n                                        placeholder=\"0\"\r\n                                        maxLength=\"1\"\r\n                                        value={otp.code2}\r\n                                        onChange={(e) => onChangeOtp(e)}\r\n                                        required\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className={styles.otp_form_input}\r\n                                        name=\"code3\"\r\n                                        placeholder=\"0\"\r\n                                        maxLength=\"1\"\r\n                                        value={otp.code3}\r\n                                        onChange={(e) => onChangeOtp(e)}\r\n                                        required\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className={styles.otp_form_input}\r\n                                        name=\"code4\"\r\n                                        placeholder=\"0\"\r\n                                        maxLength=\"1\"\r\n                                        value={otp.code4}\r\n                                        onChange={(e) => onChangeOtp(e)}\r\n                                        required\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className={styles.otp_form_input}\r\n                                        name=\"code5\"\r\n                                        placeholder=\"0\"\r\n                                        maxLength=\"1\"\r\n                                        value={otp.code5}\r\n                                        onChange={(e) => onChangeOtp(e)}\r\n                                        required\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        className={styles.otp_form_input}\r\n                                        name=\"code6\"\r\n                                        placeholder=\"0\"\r\n                                        maxLength=\"1\"\r\n                                        value={otp.code6}\r\n                                        onChange={(e) => onChangeOtp(e)}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className={styles.btnContainer}>\r\n                                    <button className={styles.otp_verify}>VERIFY</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-md-7\">\r\n                        <CarouselForAll />\r\n                    </div>\r\n                </div>\r\n                    : \"\"\r\n            }\r\n        </Modal>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}