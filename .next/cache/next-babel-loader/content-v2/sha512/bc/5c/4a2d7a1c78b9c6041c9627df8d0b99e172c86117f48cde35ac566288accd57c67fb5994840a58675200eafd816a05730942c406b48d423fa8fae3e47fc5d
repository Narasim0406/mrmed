{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useRouter } from 'next/router';\nimport { useSelector } from 'react-redux';\nimport { products_url, profiles_url } from '../../../apiVariables';\nimport styles from './AllProduct.module.scss';\n\nfunction AllProduct() {\n  const {\n    0: categories,\n    1: setCategories\n  } = useState(['Diabetes (12)', 'Eye Care (16)', 'Baby Care (28)', 'Mind Care (12)', 'Kidney Care (15)', 'Stomach Care (18)', 'Immunity Booster (4)', 'Respiratory Care (12)']);\n  const {\n    0: brands,\n    1: setBrands\n  } = useState(['Organic India (3)', 'Smart Air Fileters (4)', 'Venus (3)', 'Ansell (3)', 'Cipla (2)', 'Phzer (2)', 'BYD (6)', 'Beurer (2)']);\n  const {\n    0: discount,\n    1: setDiscount\n  } = useState(['Less than 10%', '10% and above', '20% and above', '30% and above']);\n  const {\n    0: capacity,\n    1: setCapacity\n  } = useState(['5mg', '10mg', '100g', '200g', '500g', '1000g']);\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const {\n    0: cartList,\n    1: setCartList\n  } = useState([]);\n  const router = useRouter();\n  const userDetails = useSelector(state => state.auth);\n  useEffect(() => {\n    async function fetchProducts() {\n      await axios.get(`${products_url}/product`).then(res => {\n        setProducts(res.data.data.list);\n        console.log(products);\n      });\n    }\n\n    fetchProducts();\n  }, []);\n\n  const addToCart = async product => {\n    product.addedToCart = true;\n    let data = {\n      userId: userDetails.userDetails.id,\n      productId: product._id,\n      quantity: product.quantity,\n      original_price: product.original_price,\n      discount_price: product.discount_price\n    };\n    const url = `${profiles_url}/cart`;\n    let res = await httpPostRequest(url, data);\n    console.log(res);\n\n    if (res.status === 200) {\n      alert(res.message);\n    }\n  };\n\n  const httpPostRequest = async (url, body) => {\n    console.log(body);\n    let result = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    });\n    return await result;\n  };\n\n  return __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-md-12\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: `col-md-6 ${styles.menu}`\n  }, __jsx(\"img\", {\n    src: require('../../../assets/images/menu.png')\n  }), __jsx(\"img\", {\n    src: require('../../../assets/images/list.png')\n  })), __jsx(\"div\", {\n    className: \"col-md-6\"\n  }, __jsx(\"div\", {\n    className: styles.sortDropdown\n  }, __jsx(\"select\", null, __jsx(\"option\", null, \"Sorting By Popularity\"))))), __jsx(\"div\", {\n    className: \"row\"\n  }, products.map((product, index) => {\n    let {\n      id,\n      medicineName,\n      manufacturer,\n      price,\n      discountPrice,\n      PAP,\n      discountPercentage,\n      addedToCart = false\n    } = product;\n    return __jsx(\"div\", {\n      className: \"col-md-4\",\n      key: index\n    }, __jsx(\"div\", {\n      className: styles.bottom\n    }, __jsx(\"div\", {\n      className: styles.image,\n      onClick: () => router.push('/SingleProduct')\n    }, __jsx(\"div\", {\n      className: styles.offerBadge\n    }, __jsx(\"b\", null, discountPercentage, \"%\")), __jsx(\"img\", {\n      src: require('../../../assets/images/product-3.png')\n    })), __jsx(\"div\", {\n      className: styles.category\n    }, __jsx(\"span\", null, \"Diabetes\"), __jsx(\"div\", {\n      className: styles.right\n    }, __jsx(\"span\", null, \"1\"))), __jsx(\"b\", {\n      className: styles.name\n    }, medicineName), PAP && __jsx(\"img\", {\n      className: styles.prescriptionImg,\n      src: require('../../../assets/images/prescription.png')\n    }), __jsx(\"br\", null), __jsx(\"span\", {\n      className: styles.company\n    }, \"Manufacturer: \", manufacturer), __jsx(\"hr\", null), __jsx(\"b\", {\n      className: styles.discountPrice\n    }, \"\\u20B9 \", (price - discountPrice).toFixed(2)), __jsx(\"span\", {\n      className: styles.actualPrice\n    }, \"MRP \\u20B9 \", price), __jsx(\"div\", {\n      className: styles.right\n    }, addedToCart ? __jsx(\"button\", {\n      key: id,\n      className: styles.btnAdded\n    }, \"\\u2713\") : __jsx(\"button\", {\n      className: styles.btnAdd,\n      onClick: () => addToCart(product)\n    }, \"+\"))));\n  }))));\n}\n\nexport default AllProduct;","map":null,"metadata":{},"sourceType":"module"}